<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Ticket de caisse</title>
    <style>
        /* ===== Largeur ticket ===== */
        :root {
            /* 80mm classique ; mets 58mm si tu utilises des rouleaux 58mm */
            --ticket-width: 80mm; /* ou 58mm */
            --font-size: 11px;    /* 10px conseill√© pour 58mm */
            --pad: 4mm;
        }

        /* Dompdf g√®re bien @page avec 2 dimensions.
           On donne une hauteur ‚Äúgrande‚Äù pour √©viter les coupures intempestives.
           (Dompdf coupera proprement si le contenu d√©passe.) */
        @page {
            size: var(--ticket-width) 300mm; /* augmente √† 400‚Äì600mm si besoin */
            margin: 0;
        }

        /* Reset/base */
        * { box-sizing: border-box; }
        html, body { margin: 0; padding: 0; }
        body {
            font-family: "DejaVu Sans Mono", "DejaVu Sans", monospace;
            font-size: var(--font-size);
            line-height: 1.25;
            color: #000;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        .ticket {
            width: var(--ticket-width);
            padding: var(--pad);
        }

        .center { text-align: center; }
        .right  { text-align: right; }
        .muted  { opacity: .85; }
        .small  { font-size: 0.9em; }
        .bold   { font-weight: 700; }

        /* S√©parateurs fa√ßon caisse */
        .sep       { border-top: 1px dashed #000; margin: 6px 0; }
        .sep-thick { border-top: 2px solid #000; margin: 8px 0; }

        /* Lignes libell√© ... valeur (table 2 colonnes) */
        table.kv { width: 100%; border-collapse: collapse; }
        table.kv td {
            padding: 2px 0;
            vertical-align: top;
        }
        table.kv td.label { width: 55%; }
        table.kv td.dots  { width: 15%; }
        table.kv td.val   { width: 30%; text-align: right; white-space: nowrap; }

        /* Points (leaders) : une suite de points qui passe bien avec Dompdf */
        .leaders {
            letter-spacing: 2px;
            color: #000;
            white-space: nowrap;
        }

        /* Tableau des mouvements (3 colonnes) */
        table.mv { width: 100%; border-collapse: collapse; }
        table.mv td {
            padding: 2px 0;
            vertical-align: top;
        }
        table.mv td.date { width: 22%; white-space: nowrap; }
        table.mv td.type { width: 53%; }
        table.mv td.amt  { width: 25%; text-align: right; white-space: nowrap; }

        /* Emp√™cher les coupures laides dans certains blocs */
        .no-break, h1, h2, h3 { page-break-inside: avoid; }

        /* Pied */
        .footer { margin-top: 8px; }
    </style>
</head>
<body>
<div class="ticket">
    <!-- En-t√™te -->
    <div class="center no-break">
        <div class="bold">üè¶ CAISSE ‚Äî RE√áU</div>
        <div class="small muted">Soci√©t√© / √âtablissement</div>
        <div class="small muted">Adresse ligne 1</div>
        <div class="small muted">T√©l: 05 xx xx xx xx</div>
    </div>

    <div class="sep"></div>

    <!-- Infos session (key/val) -->
    <table class="kv no-break">
        <tr>
            <td class="label">Ouverture</td>
            <td class="dots"><span class="leaders">................</span></td>
            <td class="val">25/08/2025 09:00</td>
        </tr>
        <tr>
            <td class="label">Cl√¥ture</td>
            <td class="dots"><span class="leaders">................</span></td>
            <td class="val">25/08/2025 15:30</td>
        </tr>
        <tr>
            <td class="label">Montant actuel</td>
            <td class="dots"><span class="leaders">.................</span></td>
            <td class="val bold">1‚ÄØ500,50 MAD</td>
        </tr>
    </table>

    <div class="sep-thick"></div>

    <!-- Mouvements -->
    <div class="bold">Mouvements</div>
    <table class="mv">
        <tr>
            <td class="date">09:15</td>
            <td class="type">Entr√©e ‚Äî D√©p√¥t initial</td>
            <td class="amt">+100,00</td>
        </tr>
        <tr>
            <td class="date">10:45</td>
            <td class="type">Sortie ‚Äî Achat de fournitures</td>
            <td class="amt">-50,00</td>
        </tr>
        <tr>
            <td class="date">11:30</td>
            <td class="type">Entr√©e ‚Äî Vente de produits</td>
            <td class="amt">+750,00</td>
        </tr>
        <tr>
            <td class="date">14:00</td>
            <td class="type">Entr√©e ‚Äî Vente de services</td>
            <td class="amt">+700,50</td>
        </tr>
        <tr>
            <td class="date">15:00</td>
            <td class="type">Sortie ‚Äî Remboursement client</td>
            <td class="amt">-50,00</td>
        </tr>
    </table>

    <div class="sep"></div>

    <!-- Totaux -->
    <table class="kv no-break">
        <tr>
            <td class="label">Total Entr√©es</td>
            <td class="dots"><span class="leaders">................</span></td>
            <td class="val">1‚ÄØ550,50 MAD</td>
        </tr>
        <tr>
            <td class="label">Total Sorties</td>
            <td class="dots"><span class="leaders">................</span></td>
            <td class="val">100,00 MAD</td>
        </tr>
        <tr>
            <td class="label bold">Solde</td>
            <td class="dots"><span class="leaders">................</span></td>
            <td class="val bold">1‚ÄØ450,50 MAD</td>
        </tr>
    </table>

    <div class="sep-thick"></div>

    <!-- Pied -->
    <div class="center footer small muted no-break">
        Merci pour votre visite üíô<br>
        Ticket g√©n√©r√© le 25/08/2025 15:30
    </div>
</div>
</body>
</html>
